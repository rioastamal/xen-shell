

xen-shell
---------

  This package contains a simple script called 'xen-login-shell' which is
 designed to be a login shell for a user on a Xen host.

  This new login shell runs 'xen-shell', which is the real shell, under
 GNU screen.  This allows people to work on their system safely even
 in the case of disconnections.

  There are several commands available within this shell which will
 allow the user to control their Xen guest instance.

  The shell allows:

  * Shutdown.
  * Bootup.
  * Reboot.
  * Console access.
  * Reimaging.

  This shell supports integrated help, along with command history,
 and command completion.


Notes
-----

  We setup the shell environment of GNU Screen to be the xen-shell
 script, and attempt to limit the full abilities so that users cannot
 break out into general host access.

  GNU Screen has several abilities to "break out", I've disabled all
 the ones I can spot.  There may be holes.

  The reimaging support isn't fully integrated, so for every user
 you wish to allow reimaging you will need to create:

        /home/$USER/image.sh

  This script will be invoked to do the job after waiting for confirmation.
  The script probably just needs to execute xen-create-image appropriately...


Installation
------------

  sudo make install

  Once installed set each user who you wish to control a Xen instance
 to have their shell as /usr/local/bin/xen-login-shell.

  You'll need to ensure that these users can run "xm" as root with
 no password, via sudo:


# /etc/sudoers
---
User_Alias   XENUSERS = steve,nsa,grimoire,joey
Cmnd_Alias   XEN      = /usr/sbin/xm
Cmnd_Alias   XENIMG   = /usr/bin/xen-create-image
XENUSERS     ALL      = NOPASSWD: XEN,XENIMG
---


Bugs?
-----

  Surely some mistake, Mr Bond?


Steve
-- 
